<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Closure 闭包</title>
</head>
<body>
  <script>
    // var func = function () {
    //   // a处于闭合的空间scoped之内，变量的查找-冒泡 一路冒泡直到全局window
    //   // 函数作用域
    //   var a = 1;
    //   // a = 1; // 没用var声明 将是全局变量 不推荐
    //   alert(a);
    // }
    // func();
    // alert(a) // Uncaught ReferenceError引用错误: a is not defined
    // alert(name);
    // var a = 1; // 全局变量
    // var func1 = function () {
    //   var b = 1; // 局部变量
    //   // 函数内嵌套函数
    //   // 夹层
    //   // js 任何类型都可以被赋值
    //   // 闭包：函数定义时的上下文环境
    //   // 变量查找，一直保持对b的引用
    //   var func2 = function () {
    //     // 闭包函数在执行时，可以调用到它定义时的变量
    //     var c = 3;
    //     alert(b); // 1
    //     alert(a); // 1
    //   }
    //   func2();
    //   alert(c); // error not defined
    // }
    // func1(); // 执行后b会被销毁，垃圾回收

    var func = function () {
      var a = 1; // 局部变量
      // 返回函数，函数执行
      // 重见天日
      // 函数内部的函数 函数定义
      // 外部访问
      return function () {
        a++;
        alert(a);
      }
    }
    // 出生了
    var f = func();
    f(); // 2
    f(); // 3
  </script>
</body>
</html>
